<h2><%= current_user.name %>'s Readings</h2>

<% if @user_entries.blank? %>
  You do not have any readings.
<% else %>

  <div class="summary-display">
    <div class="thoughts-keyword">Monthly Summary</div>
      <table class="summary-table">
        <tr>
          <th>TOTAL READINGS</th>
          <th>TOTAL CARDS</th>
          <th>MAJOR CARDS</th>
          <th>MINOR CARDS</th>
          <th>COURT CARDS</th>
          <th>CUP CARDS</th>
          <th>PENTACLE CARDS</th>
          <th>SWORD CARDS</th>
          <th>WAND CARDS</th>
        </tr>
        <tr>
          <td><%= @monthly_entries.size %></td>
          <td><%= @monthly_entries.size * 3 %></td>
          <td><%= @monthly_entries.designation("Major").size %> <%= "(#{(@monthly_entries.designation("Major").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.designation("Minor").size %> <%= "(#{(@monthly_entries.designation("Minor").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.court_cards.size %> <%= "(#{(@monthly_entries.court_cards.size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.suit_cards("Cups").size %> <%= "(#{(@monthly_entries.suit_cards("Cups").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.suit_cards("Pentacles").size %> <%= "(#{(@monthly_entries.suit_cards("Pentacles").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.suit_cards("Swords").size %> <%= "(#{(@monthly_entries.suit_cards("Swords").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
          <td><%= @monthly_entries.suit_cards("Wands").size %> <%= "(#{(@monthly_entries.suit_cards("Wands").size.to_f / @total_cards.to_f * 100).ceil}%)" %></td>
        </tr>
      </table>
        
        <p class="centered">
        <% if @duplicate_cards_hash.any? %>
          <% @duplicate_cards_hash.each do |name, count| %>
            You pulled <span class="pink-color"><%= name %></span> <%= count %> times<%= ',' unless name == @duplicate_cards_hash.keys.last %>
          <% end %>
        <% else %>
          You have not pulled the same card more than three times this month.
        <% end %>
        </p>
  </div>

<p></p>

  <table class="all-entries">
    <% @user_entries.each do |entry| %>
      <tr>
        <td>
          <%= entry.title unless entry.title.nil? %>
        </td>
        <td>
          <%= entry.category.name %>
        </td>
        <td>
          <%= link_to entry.created_at.strftime("%B %e, %Y"), entry_path(entry) %>
        </td>
        <td>
          <%= entry.thoughts.size %> thoughts
        </td>
        <td>
          <%= button_to "Delete Reading", entry_path(entry), method: :delete, onclick: "return confirm('Are you sure you want to delete this reading?')" %>
        </td>
      </tr>
    <% end %>
  </table>
<% end %>